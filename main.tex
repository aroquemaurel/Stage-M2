\documentclass[12pt,a4paper]{book}
\usepackage{lmodern}
\usepackage[svgnames]{xcolor} % Required to specify font color
\input{styles/couleurs.tex}
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage{wrapfig}
\usepackage[french, english]{babel}
\usepackage[top=1.7cm, bottom=1.7cm, left=1.7cm, right=1.7cm]{geometry}
\usepackage{verbatim}
\usepackage{tikz} %Vectoriel
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{multido}
\usepackage{amssymb}
\usepackage{float}
\usepackage{titlebox}
\usepackage[francais]{minitoc}
\usepackage[final]{pdfpages} 
\usepackage{graphicx} % Required for box manipulation
\usepackage{epstopdf}
\usepackage{titletoc}
%\usepackage{makeidx}
\usepackage{imakeidx}
%\usepackage[totoc]{idxlayout}
\indexsetup{level=\chapter,toclevel=chapter}
\usepackage[urlbordercolor={1 1 1}, linkbordercolor={1 1 1}, linkcolor=black, urlcolor=bleu, colorlinks=true]{hyperref}

\makeindex


\newcommand{\titre}{Développement d'un outil de tests pour un logiciel de contrôle moteur}
\newcommand{\subtitle}{GreenT}
\newcommand{\auteur}{Antoine de \bsc{Roquemaurel}}
\newcommand{\semestre}{6}
\newcommand{\annee}{2014}
\newcommand{\putminitoc}{%
\begin{wrapfigure}{r}{0.60\textwidth}
\vspace{-15px}
\begin{tocBox}
\hspace{-30px}
\begin{minipage}{1.1\textwidth}
\minitoc~
\end{minipage}
\end{tocBox}
\end{wrapfigure}
}

\usepackage{geometry}
\usepackage{amsmath}
\usepackage[some]{background}
\usepackage{lipsum}

\newcommand{\pole}{}

\input{styles/listings.tex}
\input{styles/remarquesExempleAttention.tex}
\input{styles/polices.tex}
\input{styles/affichageChapitre.tex}
\input{styles/headers.tex}

\mtcsettitle{minitoc}{\hfill Sommaire}
\mtcsetrules{minitoc}{off}
\mtcsetfeature{minitoc}{before}{\vspace{0pt}}% à ajuster
\mtcsetfeature{minitoc}{after}{\vspace{-25pt}}% à ajuster

\makeatother
\includeonly {
	contents/intro,
	contents/abstract,
	contents/conti/conti,
	contents/organization/organization,
	contents/problem/problem,
%
	contents/greent/greent,
	contents/greent/collaboration,
	contents/bilan/bilan,
%
	annexes/glossary,
	annexes/references,	
%	annexes/devices,	
	annexes/generatesFiles,
	annexes/report,
	annexes/releasenote
}


\begin{document}
	\setcounter{tocdepth}{1}
	\setcounter{secnumdepth}{2}
	\setcounter{minitocdepth}{1}
	
	\input{styles/frontPage.tex}
	~\newpage
	\addcontentsline{toc}{chapter}{Remerciements} 
	~
	\vfill
	\begin{flushright}
		\begin{minipage}{0.7\textwidth}
			\input{contents/thanks.tex}
		\end{minipage}
	\end{flushright}
	\vfill
	~
	\include{contents/abstract}
	\include{contents/intro}
		\dominitoc

\tableofcontents

\setcounter{mtc}{4}
	\include{contents/conti/conti} % ok
\setcounter{mtc}{5}
	\include{contents/problem/problem}
	\setcounter{mtc}{6}
	\include{contents/organization/organization}	
	\setcounter{mtc}{7}
	\include{contents/greent/greent}
	\setcounter{mtc}{8}
	\include{contents/greent/collaboration}
	\setcounter{mtc}{9}
	\include{contents/bilan/bilan}

	\appendix
	\mystarpart{Annexes}{\hfill\begin{minipage}{0.5\textwidth}Ci-après vous trouverez un certain nombre d'annexes qui pourront vous permettre de mieux comprendre l’étendue de mon travail et de la plateforme qui est en cours de développement.\newline~\newline			
			Vous y trouverez ainsi un glossaire, des références, des exemples de rapport, de fichiers générés ainsi qu'une explication plus approfondie des équipements utilisés.\end{minipage}}

	\include{annexes/glossary}
	\printindex
	\include{annexes/references}
	\include{annexes/report}
	\include{annexes/releasenote}
	\include{annexes/generatesFiles}
	\listoffigures
	\lstlistoflistings

	
\end{document}
