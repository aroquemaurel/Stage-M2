\chapter{Le problème} \label{chapPb}
\putminitoc
Depuis longtemps, l'entreprise avait un problème afin d'effectuer des tests d'intégrations, notamment pour les projets à destination de Ford. Les tests demandaient du temps et de l'argent à l'équipe en charge de ces tests. Ainsi, deux ans avant mon stage de M1, une solution à été trouvée : le développement d'une nouvelle plateforme, \textit{GreenT}.
	\section{\textit{Third-Party Software Component}}
	Étant donné la taille grandissante des programmes informatique, il est de plus en plus rare qu'une seule et unique entité effectue le développement d'un logiciel.
	
	C'est ainsi que chez Continental, un certain nombre de composant des calculateurs ne sont pas développés en interne. Ce concept est appelé \textit{Third-Party Software}. 
	
	La principale difficulté de ce mode de fonctionnement est l'intégration, une spécification exhaustive est indispensable afin de pouvoir connecter les différentes interfaces du composant avec le reste du projet. 
	
	C'est avec ces contraintes que travaillent l'équipe en charge du développement des différents logiciels de contrôle moteur à destination de Ford.
	
	\section{Les tests du << plugin >> Ford}\label{plugin}
	Dans le cadre de projets pour Ford, Continental ne développe pas l'intégralité du logiciel, une partie étant fournie par le client sous forme de << plugin >>. Ce plugin est un fichier binaire qui est chargé directement dans la mémoire flash de l'ECU sans que Continental n'ait accès au code source. Seule une description des interfaces est fournie. Le \textit{plugin} est supposé correct, et le tester n'est pas de notre ressort. Cependant, celui-ci va être interfacé avec les logiciels Continental : il est indispensable de vérifier que les deux parties fonctionnent ensemble lors de l'intégration.
	\begin{figure}[H]
		\centering
		\includegraphics[width=8.0cm]{contents/images/plugin.eps}
		\caption{Interfaces du plugin avec le logiciel de Continental}
		\label{fig:plugin}	
	\end{figure}
	
	Le fichier de spécification est un fichier Excel, fourni par le client. Ce fichier, appelé \texttt{Walkthrough}\footnote{Ce fichier est expliqué plus en détail section \ref{wt}}, 
	contient la liste de toutes les variables du plugin avec toutes leur spécifications. Il contient
	environ 900 variables différentes. 
	
	Il est impensable de tester le fonctionnement d'autant de paramètres manuellement. Ainsi l'équipe en
	charge de tester cette intégration effectue des tests de différence d'une version à l'autre : seules les variables ayant pu être impactées par une \textit{release} seront testées, il est supposé que le fonctionnement des autres variables reste inchangé. Ce type de test est appelé \textit{Delta Test}.
	
	\vspace{20px}
	Deux problèmes se posent à cette méthode : 
	\begin{description}
		\item[La fiabilité des tests manuels] Le test des seules différences ne permet pas nécessairement de détecter tous les problèmes (notamment avec des effets de bords\ldots). De plus, une tâche répétitive peut entrainer des erreurs humaines.
		\item[Le temps de tests] Même en ne testant qu'une partie des variables, cela prend un temps considérable, il faut compter environ une semaine.\newline
			Or, les tests s'effectuent sur les bancs de tests comme expliqué section \ref{wb}, ces équipements permettent de simuler un environnement voiture autour du contrôleur moteur comme
			l'utilisation de la clé de démarrage, la tension de la batterie, la vitesse de rotation du moteur, \ldots Ces bancs sont peu
			nombreux dans l'entreprise en raison de leur cout, leur disponibilité est compliquée. Il serait intéressant de pouvoir lancer
			des tests automatisés durant la nuit par exemple afin de les décharger de ce travail.
	\end{description}
	
\newpage
	\section{La solution : \textit{GreenT}}
	Pour répondre aux besoins de l'équipe Ford, une solution a été pensée en étudiant les besoins de l'équipe en charge des tests du plugin : le développement de \textit{GreenT}
	\begin{remarque}
		Le nom de \textit{GreenT} provient de la contraction de \textit{Green} et \textit{Test}.
		
		En effet, un test est signalé correct si celui-ci est vert, or le but de notre plateforme est d'automatiser des tests et qu'à la fin de l'exécution, tout ceux-ci soient verts.
	\end{remarque}
	
	\subsection{Génération de tests automatiques}
	\subsubsection{Les tests d'intégration du plugin Ford}
	À court terme, cette solution devrait permettre de tester le plugin pour les projets Ford facilement et de façon efficace. Pour cela, les testeurs Continental vont ajouter des colonnes dans le document \textit{Walkthrough}, afin de spécifier la manière de tester les variables. La plateforme, sera capable d'analyser le document \textit{Walkthrough}, et de générer les tests automatiques. Le testeur pourra ensuite planifier son exécution, celle-ci devra prendre une dizaine d'heures pour 800 tests. Une fois l'exécution terminée, le testeur aura tous les résultats de ces tests, il pourra ainsi regarder les rapports détaillés afin de corriger les éventuels problèmes.
	
	Ces tests s'effectueront sur des variables enregistrées lors de stimulation de l'ECU, afin de vérifier que celui-ci réagit de façon approprié.

	Cette plateforme permettra donc de tester facilement la dizaine de projets Ford, et une fois le test d'une variable spécifiée, il n'est plus nécessaire de le réécrire. À chaque nouvelle \textit{release} il suffira de relancer les tests : l'équipe n'aura à faire le travail qu'une fois, ensuite la réutilisation sera possible, les projets seront testés plus rapidement, plus efficacement, et plus souvent.

	\subsubsection{Les autres projets}
	À moyen terme, cette plateforme pourrait être utilisée pour les projets d'autres clients tel que Renault, afin d'effectuer là aussi des tests d'intégration. Il était nécessaire de concevoir une plateforme qui puisse évoluer facilement, et avoir un fichier de spécifications en entrée qui soit légèrement différent d'un client à l'autre.

	En effet, les autres clients peuvent aussi fournir une partie du logiciel, avec un document de spécification des variables, celui-ci ne serait pas totalement identique, mais il s'en approchera.

	Il est également envisageable que la plateforme soit utilisée pour des tests d'intégration en interne, indépendamment des spécifications fournies par un client externe à Continental.
	\newpage
	\subsection{L'utilisation de \textit{GreenT} comme une bibliothèque}
	Une autre approche de notre plateforme, serait de s'en servir pour écrire facilement des tests en Java, de façon plus efficace et plus robuste qu'avec la TA3 : notre plateforme doit donc également fonctionner comme une bibliothèque sans utilisation de générateur ou de parser, pour que le testeur puisse effectuer un test rapide. 

	Celui-ci apprendra à se servir de la plateforme, écrira en règle générale des tests assez courts et moins complexes que ceux que nous générerons, ceux-ci doivent être faciles à écrire.

